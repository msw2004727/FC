    <!-- PAGE: Activities -->
    <section class="page" id="page-activities">
      <div class="page-header">
        <h2>活動行事曆</h2>
        <button class="filter-btn" id="filter-toggle">篩選 ▾</button>
      </div>
      <div class="filter-bar" id="filter-bar">
        <select id="activity-filter-type">
          <option value="">全部類別</option>
          <option value="play">PLAY</option>
          <option value="camp">教學</option>
        </select>
        <div class="filter-search-wrap">
          <input type="text" id="activity-filter-keyword" placeholder="搜尋名稱 / 地點..." style="border-radius:var(--radius-sm) 0 0 var(--radius-sm);border-right:none">
          <button id="activity-filter-search-btn" class="filter-search-btn">搜尋</button>
        </div>
      </div>
      <!-- Coach+ : My Activity Management -->
      <div class="my-section" data-min-role="coach">
        <button class="action-btn" onclick="App.showPage('page-my-activities')">活動管理</button>
      </div>
      <div class="tab-bar" id="activity-tabs">
        <button class="tab active" data-atab="normal" onclick="App.switchActivityTab('normal')">一般</button>
        <button class="tab" data-atab="ended" onclick="App.switchActivityTab('ended')">已結束</button>
      </div>
      <div class="timeline-calendar" id="activity-list">
        <div class="skeleton skeleton-line"></div>
        <div class="skeleton skeleton-line"></div>
        <div class="skeleton skeleton-line"></div>
        <div class="skeleton skeleton-line"></div>
      </div>
    </section>

    <!-- PAGE: Activity Detail -->
    <section class="page" id="page-activity-detail">
      <div class="page-header">
        <button class="back-btn" onclick="App.goBack()">←</button>
        <div style="display:flex;align-items:center;justify-content:space-between;gap:.5rem;flex:1;min-width:0">
          <h2 id="detail-title" style="margin:0;min-width:0;flex:1">活動名稱</h2>
          <div id="detail-public-toggle-wrap" style="display:none;flex-shrink:0"></div>
        </div>
      </div>
      <div class="td-img-placeholder" id="detail-img-placeholder">活動圖片 800 × 300</div>
      <div class="detail-body" id="detail-body">
        <!-- Populated by JS -->
      </div>
    </section>

    <section class="page" id="page-my-activities" data-min-role="coach">
      <div class="page-header">
        <button class="back-btn" onclick="App.goBack()">←</button>
        <h2>活動管理</h2>
        <div id="my-activity-creator-wrap" style="display:none;position:relative">
          <input type="text" id="my-activity-creator-input" placeholder="篩選主辦人..." autocomplete="off" oninput="App.searchCreatorFilter()" style="font-size:.72rem;padding:.25rem 1.4rem .25rem .4rem;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-card);color:var(--text-primary);width:110px">
          <span id="my-activity-creator-clear" onclick="App.clearCreatorFilter()" style="display:none;position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:.7rem;color:var(--text-muted);line-height:1">✕</span>
          <div id="my-activity-creator-dropdown" class="ce-delegate-dropdown" style="min-width:140px"></div>
        </div>
        <button class="primary-btn small" onclick="App.openCreateEventModal()">＋ 新增</button>
      </div>
      <div id="my-activity-stats" style="font-size:.75rem;color:var(--text-muted);padding:0 .5rem .3rem;text-align:right"></div>
      <div class="tab-bar" id="my-activity-tabs">
        <button class="tab active" data-afilter="all" onclick="App.switchMyActivityTab('all')">全部</button>
        <button class="tab" data-afilter="upcoming" onclick="App.switchMyActivityTab('upcoming')">即將開放</button>
        <button class="tab" data-afilter="open" onclick="App.switchMyActivityTab('open')">報名中</button>
        <button class="tab" data-afilter="full" onclick="App.switchMyActivityTab('full')">已額滿</button>
        <button class="tab" data-afilter="ended" onclick="App.switchMyActivityTab('ended')">已結束</button>
        <button class="tab" data-afilter="cancelled" onclick="App.switchMyActivityTab('cancelled')">已取消</button>
      </div>
      <div class="card-list" id="my-activity-list"></div>
      <!-- 查看名單彈窗 -->
      <div id="my-activity-detail-modal" style="display:none;position:fixed;inset:0;z-index:1200;background:rgba(0,0,0,.45);backdrop-filter:blur(4px);align-items:center;justify-content:center" onclick="if(event.target===this)this.style.display='none'">
        <div style="background:var(--bg-card);border-radius:var(--radius-lg);max-width:440px;width:92%;max-height:85vh;overflow-y:auto;padding:1.2rem;position:relative">
          <button style="position:absolute;top:.6rem;right:.8rem;background:none;border:none;font-size:1.2rem;cursor:pointer;color:var(--text-muted)" onclick="document.getElementById('my-activity-detail-modal').style.display='none'">✕</button>
          <div id="my-activity-detail-content"></div>
        </div>
      </div>
    </section>

  <!-- Create Event Modal -->
  <div class="modal" id="create-event-modal">
    <div class="modal-header">
      <h3>新增活動</h3>
      <button class="modal-close" onclick="App.closeModal()">✕</button>
    </div>
    <div class="modal-body">
      <div class="ce-form">
        <!-- 範本選擇器 -->
        <div class="ce-row" id="ce-template-area">
          <label>從範本建立</label>
          <div id="ce-template-selector" style="display:flex;gap:.3rem;flex-wrap:wrap;align-items:center"></div>
        </div>
        <div class="ce-row">
          <label>活動封面圖片</label>
          <div class="ce-upload" id="ce-upload-area">
            <input type="file" id="ce-image" accept="image/*" hidden>
            <div class="ce-upload-placeholder" id="ce-upload-preview" onclick="document.getElementById('ce-image').click()">
              <span class="ce-upload-icon">+</span>
              <span class="ce-upload-text">點擊上傳圖片</span>
              <span class="ce-upload-hint">建議尺寸 800 × 300 px｜JPG / PNG｜最大 2MB</span>
            </div>
          </div>
        </div>
        <div class="ce-row">
          <label>活動名稱 <span class="required">*必填</span></label>
          <input type="text" id="ce-title" placeholder="例：週六足球友誼賽" maxlength="12">
        </div>
        <div class="ce-row">
          <label>活動類型</label>
          <select id="ce-type">
            <option value="play">PLAY</option>
            <option value="camp">教學</option>
          </select>
        </div>
        <div class="ce-row">
          <label>地點 <span class="required">*必填</span></label>
          <input type="text" id="ce-location" placeholder="例：台北市大安運動中心">
        </div>
        <div class="ce-row">
          <label>活動時間 <span class="required">*必填</span></label>
          <div style="display:flex;gap:.3rem;align-items:center">
            <input type="date" id="ce-date" style="flex:1.2">
            <input type="time" id="ce-time-start" style="flex:1" step="1800">
            <span style="font-size:.82rem;color:var(--text-muted)">~</span>
            <input type="time" id="ce-time-end" style="flex:1" step="1800">
          </div>
        </div>
        <div class="ce-row">
          <label>開放報名時間 <span style="font-size:.68rem;color:var(--text-muted);font-weight:400">（未設定則立即開放）</span></label>
          <input type="datetime-local" id="ce-reg-open-time" style="width:100%">
          <div style="font-size:.68rem;color:var(--text-muted);margin-top:.2rem">報名時間未到將顯示「即將開放」，到達時間後自動變為「報名中」</div>
        </div>
        <div class="ce-row ce-row-half">
          <div>
            <label>費用 ($)</label>
            <input type="number" id="ce-fee" placeholder="0" value="300">
          </div>
          <div>
            <label>人數上限 <span class="required">*必填</span></label>
            <input type="number" id="ce-max" placeholder="20" value="20">
          </div>
        </div>
        <input type="hidden" id="ce-waitlist" value="0">
        <div class="ce-row">
          <label>年齡限制（歲以上，0 為不限）</label>
          <input type="number" id="ce-min-age" placeholder="0" value="0" min="0">
        </div>
        <div class="ce-row">
          <label>球隊限定</label>
          <div style="display:flex;align-items:center;gap:.5rem;flex-wrap:wrap">
            <label class="toggle-switch" style="margin:0">
              <input type="checkbox" id="ce-team-only">
              <span class="toggle-slider"></span>
            </label>
            <span id="ce-team-only-label" style="font-size:.78rem;color:var(--text-muted)">關閉 — 所有人可見</span>
            <select id="ce-team-select" style="display:none;font-size:.78rem;padding:.2rem .4rem;border-radius:var(--radius-sm);border:1px solid var(--border);background:var(--card-bg);color:var(--text-primary)"></select>
          </div>
        </div>
        <div class="ce-row">
          <label>委託人（最多 3 人）</label>
          <div class="ce-delegate-wrap">
            <div class="ce-delegate-tags" id="ce-delegate-tags"></div>
            <input type="text" id="ce-delegate-search" placeholder="搜尋 UID 或暱稱..." autocomplete="off">
            <div class="ce-delegate-dropdown" id="ce-delegate-dropdown"></div>
          </div>
        </div>
        <div class="ce-row">
          <label>注意事項（上限 500 字）</label>
          <textarea id="ce-notes" rows="3" maxlength="500" placeholder="例如：請自備球鞋、飲用水，遲到15分鐘以上視為缺席..."></textarea>
        </div>
        <div class="ce-row" style="border-top:1px solid var(--border);padding-top:.6rem;margin-top:.3rem">
          <label>儲存為範本</label>
          <div style="display:flex;gap:.3rem;align-items:center">
            <input type="text" id="ce-template-name" placeholder="範本名稱（例：週六友誼賽）" maxlength="20" style="flex:1;min-width:0;font-size:.78rem;padding:.3rem .5rem;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-card);color:var(--text-primary)">
            <button class="outline-btn" style="font-size:.72rem;padding:.28rem .5rem;flex-shrink:0" onclick="App._saveEventTemplate()">儲存</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-actions">
      <button class="outline-btn" onclick="App.closeModal()">取消</button>
      <button class="primary-btn" id="ce-submit-btn" onclick="App.handleCreateEvent()">建立活動</button>
    </div>
  </div>
